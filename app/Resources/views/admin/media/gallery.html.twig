{% extends 'admin/layout.html.twig' %}

{% block body %}
    <h1>{{ media.title }}</h1>
    <ul>
    {% for widget in media.gallery %}
        {% if 'image' == media.category %}
            <li>
                <a href="#" title="Voir l'apperçu" data-toggle="modal" data-target="#image-preview"
                    data-href="{{ asset(widget.path) }}"
                    data-id="{{ widget.id }}">{{ widget.name }}</a>
            </li>
        {% elseif 'audio' == media.category %}

        {% elseif 'video' == media.category %}

        {% endif %}

    {% else %}
        <p class="text-center"><em>Vous n'avez pas encore ajouté de média sur cette gallerie</em></p>
    {% endfor %}
    </ul>

    <h3>Ajouter un fichier</h3>
    {{ form_start(form) }}
        {{ form_row(form.file) }}
        <input type="submit" value="Envoyer" class="btn btn-primary btn-block pull-right" />
    {{ form_end(form) }}

    {# modal #}
    <div class="modal fade" id="image-preview" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
                    <h4 class="modal-title"></h4>
                </div>
                <div class="modal-body">
                    <img />
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        $('#image-preview').on('shown.bs.modal', function (e) {
            var link = $(e.relatedTarget);
            var id = link.data('id');
            var path = link.data('href');
            var name = link.text();
            $(this).find('.modal-title').text(name);
            $(this).find('.modal-body img').attr('src', path);
        })
    </script>
{% endblock %}